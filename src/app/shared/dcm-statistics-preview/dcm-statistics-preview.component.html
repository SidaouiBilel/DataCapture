<div class="loading" *ngIf="!stats_content">
  <nz-spin nzSimple nzTip="Loading the statistics..."></nz-spin>
</div>

<div *ngIf="stats_content">
  <nz-collapse nzAccordion>
    <nz-collapse-panel nzHeader="Repartition Pauvre">
      <div style="display: block; width: 500px; height: 400px;">
        <canvas baseChart [data]="pieChartData" [labels]="pieChartLabels"
          [chartType]="pieChartType"></canvas>
      </div>
    </nz-collapse-panel>
    <nz-collapse-panel nzHeader="Repartition Region">
      <div style="display: block; width: 500px; height: 400px;">
        <canvas baseChart [data]="pieChartData" [labels]="pieChartLabels"
          [chartType]="pieChartType"></canvas>
      </div>
    </nz-collapse-panel>
    <nz-collapse-panel nzHeader="Consommation states">
      <nz-table nzBordered #basicTable nzShowSizeChanger nsAutoHeightTable='20' [nzData]='(resultat$ | async )' nzSize='small'>
        <thead>
          <tr>
            <th>Consommation</th>
            <th>Max</th>
            <th>Nombre des pauvres ayant une consommation > au max</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let data of basicTable.data">
            <td>{{data.consommation}}</td>
            <td>{{data.max}}</td>
            <td>{{data.count_pauvre}}</td>
          </tr>
        </tbody>
        </nz-table>
    </nz-collapse-panel>
  </nz-collapse>
</div>

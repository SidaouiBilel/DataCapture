<div class="loading" *ngIf="!stats_content">
  <nz-spin nzSimple nzTip="Loading the statistics..."></nz-spin>
</div>

<div *ngIf="stats_content">
  <nz-collapse nzAccordion>
    <nz-collapse-panel nzHeader="Repartition Eligibilité">
      <div style="display: block; width: 600px; height: 300px;">
        <canvas style="height: 100%;" baseChart [data]="pieScoreChartData" [labels]="pieScoreChartLabels"
          [chartType]="pieChartType"></canvas>
      </div>
    </nz-collapse-panel>

    <nz-collapse-panel nzHeader="Repartition Region">

      <div class="chart">
        <div style="display: block; width: 600px; height: 300px;">
          <canvas style="height: 100%;" baseChart [data]="pirRegionChartData" [labels]="pieRegionChartLabels"
            [chartType]="pieChartType"></canvas>
        </div>
        <div class="region">
          <ul>
            <li>1 : Tanger-Tétouan-Al Hoceïma </li>
            <li>2 : Oriental </li>
            <li>3 : Fès-Meknès </li>
            <li>4 : Rabat-Salé-Kénitr </li>
            <li>5 : Béni Mellal-Khénifra </li>
            <li>6 : Casablanca-Settat </li>
            <li>7 : Marrakech-Safi </li>
            <li>8 : Drâa-Tafilalet </li>
            <li>9 : Souss-Massa </li>
            <li>10 : Guelmim-Oued Noun </li>
            <li>11 : Laâyoune-Sakia El Hamra </li>
            <li>12 : Dakhla-Oued Ed Dahab </li>
          </ul>
        </div>
      </div>
    </nz-collapse-panel>

    <nz-collapse-panel nzHeader="Repartition Milieu">
      <div style="display: block; width: 600px; height: 300px;">
        <canvas style="height: 100%;" baseChart [data]="pieMilieuChartData" [labels]="pieMilieuChartLabels"
          [chartType]="pieChartType"></canvas>
      </div>
    </nz-collapse-panel>

    <nz-collapse-panel nzHeader="Consommation states">
      <nz-table nzBordered #basicTable nzShowSizeChanger nsAutoHeightTable='20' [nzData]='(resultat$ | async )'
        nzSize='small'>
        <thead>
          <tr>
            <th>Consommation</th>
            <th>Max</th>
            <th>Nombre des pauvres ayant une consommation > au max</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let data of basicTable.data">
            <td>{{data.consommation}}</td>
            <td>{{data.max}}</td>
            <td>{{data.count_pauvre}}</td>
          </tr>
        </tbody>
      </nz-table>
    </nz-collapse-panel>
  </nz-collapse>
</div>

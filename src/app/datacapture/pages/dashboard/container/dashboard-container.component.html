<div class="dashboard-container">
  <div class="flex-box">
    <!-- Header -->
    <div class="dashHeader" nz-row>
      <div nz-col nzSpan="18">
        <div>
          <i nz-icon class="pr-3" nzType="block" nzTheme="outline" [class.text-danger]="!(selectedDomain?.name)"></i>
          <button class="ghost" [class.req-input]="!(selectedDomain?.name)" nz-button nz-dropdown
            [nzDropdownMenu]="menu" [nzPlacement]="'bottomRight'">
            <div style="min-width:200px" class="flex between">
              <div class="flex-1 text-left">{{ (selectedDomain?.name) || 'None' }}</div>
              <i style="opacity: 0.5;" nz-icon nzType="down" nzTheme="outline"
                [class.text-danger]="!(selectedDomain?.name)"></i>
            </div>
          </button>
        </div>
      </div>
      <div nz-col nzSpan="6" class="text-right button-spacing">
      </div>
    </div>

    <nz-divider class="horiz" nzOrientation="left"></nz-divider>
    <!-- Body -->
    <nz-tabset *ngIf="selectedDomain">
      <nz-tab [nzTitle]="titleTemplate">
        <ng-template #titleTemplate>
          <i nz-icon [nzType]="'unordered-list'"></i>
          Uploads
        </ng-template>

        <ng-template nz-tab>
          <app-upload-list [selectedDomain]="selectedDomain"></app-upload-list>
        </ng-template>
      </nz-tab>
      <nz-tab [nzTitle]="titleTemplate2">
        <ng-template #titleTemplate2>
          <i nz-icon [nzType]="'database'"></i>
          Data
        </ng-template>
        <ng-template nz-tab>
          <app-upload-data [selectedDomain]="selectedDomain"></app-upload-data>
        </ng-template>
      </nz-tab>
    </nz-tabset>
  </div>
</div>

<nz-dropdown-menu #menu="nzDropdownMenu">
  <ul nz-menu>
    <li *ngFor="let item of keys(domains)" nz-submenu [nzTitle]="domainTemplate">
      <ng-template #domainTemplate>
        <i nz-icon nzType="folder" nzTheme="outline"></i>
        {{item}}
      </ng-template>
      <ul>
        <li *ngFor="let domain of domains[item]" nz-menu-item (click)="selectDomain(domain)">
          <i nz-icon nzType="block" nzTheme="outline"></i>
          {{domain.name}}
        </li>
      </ul>
    </li>
  </ul>
</nz-dropdown-menu>


<!-- <nz-card class="fields-card ma-b"> -->
<!-- <nz-page-header class="site-page-header" (nzBack)="onBack()" nzBackIcon nzTitle="Target Fields" nzSubtitle="Customize domain specific fields"> -->
  <!-- <nz-page-header-content>
    <div class="content">
      <div class="extra">
        <div>
          <nz-statistic nzTitle="Status" nzValue="Pending"></nz-statistic>
          <nz-statistic nzTitle="Price" [nzValue]="568.08" nzPrefix="$" style="margin: 0 32px"></nz-statistic>
        </div>
      </div>
    </div>
  </nz-page-header-content> -->

<!-- </nz-page-header> -->
<!-- </nz-card> -->

<div nz-row class='ma-b'>

  <div nz-col [nzSpan]='18'>

    <button nz-button class='ghost' (click)='openConfig(null)'  ><i nz-icon nzType="plus"></i>Add Target Field</button>

    
    <nz-upload
      [nzAction]="uploadURI"
      [nzHeaders]="{ authorization: 'authorization-text' }"
      (nzChange)="handleChange($event)"
      >
      <button nz-button  class='ghost'><i nz-icon nzType="file-excel" nzTheme="outline"></i>Import</button>

      <button nz-button class='ghost' (click)="load_data()"  ><i nz-icon nzType="reload"></i></button>
    </nz-upload>
    
  </div>

  <div nz-col [nzSpan]='6'>
    <nz-input-group [nzSuffix]="suffixIconSearch">
      <input type="text" nz-input placeholder="Filter Domain Targets" />
    </nz-input-group>
    <ng-template #suffixIconSearch>
      <i nz-icon nzType="search"></i>
    </ng-template>
    </div>
  </div>

<nz-card class="fields-card ma-b">
<nz-table [nzData]="list$ | async" nzSize='small' [nzShowPagination]="false" [nzLoading]='loading'>
    <thead>
      <tr>
          <ng-container  *ngFor="let column of columns">
            <th *ngIf="column.field == 'action'">
                <!-- <button nz-button nzType="primary"  (click)='openConfig(null)'><i nz-icon nzType="plus"></i></button> -->
            </th>
            <th *ngIf="column.field != 'action'">
                {{ column.label }}
            </th>

          </ng-container>
          
     
      </tr>
    </thead>
    <tbody>

      <tr *ngFor="let data of list$ | async">
        
        <ng-container  *ngFor="let column of columns">
          <ng-container [ngSwitch]="column.field">

            <td *ngSwitchCase="'action'">
              <div class="button-spacing">
                <button nz-button class="ghost" (click)='openConfig(data)'><i nz-icon nzType="edit"></i></button>
                <nz-divider nzType='vertical'></nz-divider>
                <button nz-button class="ghost" (click)='showDeleteConfirm(data)'><i nz-icon nzType="delete"></i></button>
              </div>
            </td>

            <td *ngSwitchCase="'rules'">
              <span *ngFor="let rule of data.rules; let i = index">
                <span *ngIf='i!=0'>, </span>{{ (checks$ | async)[rule.type].name }}
              </span>
            </td>
            <td *ngSwitchCase="'mandatory'"><app-bool-icon [b]='data[column.field]'></app-bool-icon> </td>
            <td *ngSwitchCase="'editable'" ><app-bool-icon [b]='data[column.field]'></app-bool-icon> </td>
            

            

            <td *ngSwitchDefault>
                {{ data[column.field] }}
            </td>



          </ng-container>
        </ng-container>

      </tr>
    </tbody>
  </nz-table>
</nz-card>
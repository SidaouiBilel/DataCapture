

<nz-card class="paddless" *ngIf='showProgress'>
    <nz-progress class="raw" [nzPercent]="progress" nzSize="small" [nzStatus]="progressStatus"></nz-progress>

    <!-- SWITCH STATUS -->
    <div class="m-3">

    <div class="flex between top">

      <!-- DESCRIPTIONS -->
      <ng-template #dscTitle> 
        <div class="flex between">
          <div class="font-weight-light mr-3"><i nz-icon nzType="fund-projection-screen" nzTheme="outline"></i> Run Information</div>
          <div class="fill">
            <nz-tag *ngFor='let l of legend | keyvalue' [nzColor]="l.value.color">{{l.value.label}}</nz-tag>
          </div>
        </div>
      </ng-template>
      <nz-descriptions [nzTitle]='dscTitle' class="mb-2" *ngIf='showProgress' [nzColon]='false' nzSize="small">
        <nz-descriptions-item nzTitle="Tasks">{{doneSteps}} (Done) / {{progressSteps}} (Total)</nz-descriptions-item>
        <nz-descriptions-item nzTitle="Status"><nz-badge [nzStatus]="badgeType" [nzText]='run.state'></nz-badge></nz-descriptions-item>
        <nz-descriptions-item nzTitle="Run Files"><button nz-button><i nz-icon nzType="file" nzTheme="outline"></i>Logs</button></nz-descriptions-item>
        <nz-descriptions-item nzTitle="Excecution Date">{{run.execution_date | date}}</nz-descriptions-item>
        <!-- <nz-descriptions-item nzTitle="Tasks"><nz-progress [nzStatus]="progressStatus" [nzPercent]="progress" [nzSteps]="progressSteps" nzStrokeColor="#1890ff"></nz-progress></nz-descriptions-item> -->
        <nz-descriptions-item nzTitle="Start Date">{{run.start_date | date}}</nz-descriptions-item>
        <nz-descriptions-item nzTitle="End Date">{{run.end_date | date}}</nz-descriptions-item>
        <!-- <nz-descriptions-item nzTitle="Run ID">{{run.run_id}}</nz-descriptions-item> -->
      </nz-descriptions>

        <!-- BUTTONS -->
        <!-- <ng-container [ngSwitch]="runStatus" >

          <div *ngSwitchCase="'not_running'" class="button-spacing">
              <button nz-button (click)='trigger.emit()'><i nz-icon nzType="caret-right" nzTheme="outline"></i> Trigger</button>
              <button  nz-button><i nz-icon nzType='bug'></i> Debug</button>
            </div>
            <div *ngSwitchCase="'running'">
              <button nz-button nzDanger><i nz-icon nzType='stop'></i> Stop</button>
              
            </div>
            <div *ngSwitchDefault>
              <div class="button-spacing">
              <button nz-button (click)='trigger.emit()'><i nz-icon nzType="caret-right" nzTheme="outline"></i> Trigger Again</button>
              <button nz-button><i nz-icon nzType='file'></i> View Logs</button>
            </div>
          </div>
        </ng-container> -->
    </div>

    <!-- <nz-progress [nzPercent]="progress" nzSize="small" [nzStatus]="progressStatus"></nz-progress> -->

  </div>


  <!-- <nz-progress class="raw"  *ngIf='showProgress' [nzPercent]="progress" nzSize="small" [nzStatus]="progressStatus"></nz-progress> -->

  </nz-card>